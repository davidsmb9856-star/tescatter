<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeri 3 Link Gambar Paket</title>
    <link rel="stylesheet" href="style.css">
</head>
  <style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    padding: 20px;
}

.container {
    max-width: 900px;
    margin: 0 auto;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    box-sizing: border-box;
}

button {
    padding: 10px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
}

button:hover:not(:disabled) {
    background-color: #0056b3;
}

button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

.gallery-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
}

.nav-button {
    flex-shrink: 0;
    margin: 0 10px;
    padding: 15px 10px;
}

.image-display {
    display: flex;
    justify-content: space-around;
    flex-grow: 1;
    gap: 10px; /* Jarak antar gambar */
}

.image-slot {
    flex: 1;
    text-align: center;
    border: 2px solid #ddd;
    padding: 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    background-color: #fafafa;
}

.image-slot:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.image-slot img {
    width: 100%;
    height: auto;
    max-height: 150px; /* Batasi tinggi gambar di tampilan mini */
    object-fit: contain;
    display: block;
    margin: 0 auto 5px;
}

.image-slot p {
    font-size: 0.9em;
    color: #555;
    margin: 5px 0 0;
}

.package-info {
    text-align: center;
    margin-top: 15px;
    font-weight: bold;
}

/* --- Modal/Zoom Styling --- */
.modal {
    display: none; /* Sembunyikan secara default */
    position: fixed; 
    z-index: 100; /* Tempatkan di atas segalanya */
    padding-top: 50px; 
    left: 0;
    top: 0;
    width: 100%; 
    height: 100%; 
    overflow: auto; 
    background-color: rgba(0,0,0,0.9); /* Latar belakang gelap */
}

.modal-content {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 900px;
    max-height: 90vh; /* Tinggi maksimum */
    margin-top: 10px; /* Beri sedikit ruang dari userid */
}

#caption {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
    text-align: center;
    color: #ccc;
    padding: 10px 0;
    height: 150px;
}

.close-btn {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    cursor: pointer;
}

.close-btn:hover,
.close-btn:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

/* Gaya untuk User ID di dalam modal */
.zoomed-userid {
    display: block; /* Agar mengambil baris sendiri */
    text-align: center;
    color: white;
    font-size: 2em; /* Lebih besar */
    font-weight: bold;
    margin-bottom: 10px; /* Jarak ke gambar */
    position: relative;
    z-index: 101; /* Pastikan di atas gambar */
}
  </style>
</head>
<body>

    <div class="container">
        <h1>Input Link Gambar (Maks 6 Paket)</h1>

        <textarea id="linkInput" placeholder="Tempelkan data di sini. Format: USERID link_gambar1 link_gambar2 link_gambar3. Setiap baris baru adalah 1 paket." rows="8"></textarea>
        <button onclick="loadImages()">Tempel & Muat Gambar</button>

        <hr>

        <div class="gallery-container">
            <button class="nav-button" id="prevBtn" onclick="prevPackage()" disabled>&#9664; Kiri</button>
            
            <div class="image-display" id="imageDisplay">
                <div class="image-slot" onclick="openZoom(this)" id="imgSlot1" data-userid="" data-link="">
                    <img src="placeholder.png" alt="Gambar 1">
                    <p>Gambar 1</p>
                </div>
                <div class="image-slot" onclick="openZoom(this)" id="imgSlot2" data-userid="" data-link="">
                    <img src="placeholder.png" alt="Gambar 2">
                    <p>Gambar 2</p>
                </div>
                <div class="image-slot" onclick="openZoom(this)" id="imgSlot3" data-userid="" data-link="">
                    <img src="placeholder.png" alt="Gambar 3">
                    <p>Gambar 3</p>
                </div>
            </div>

            <button class="nav-button" id="nextBtn" onclick="nextPackage()" disabled>Kanan &#9654;</button>
        </div>

        <p class="package-info">
            Paket: <span id="currentPackageNum">0</span> / <span id="maxPackageNum">0</span>
        </p>

    </div>

    <div id="zoomModal" class="modal" onclick="closeZoom(event)">
        <span class="close-btn">&times;</span>
        <span id="zoomedUserid" class="zoomed-userid"></span> 
        <img class="modal-content" id="zoomedImage">
        <div id="caption">Klik di mana saja di luar gambar atau ikon (x) untuk menutup.</div>
    </div>

    <script src="script.js"></script>

<script>
let allPackagesData = []; // Array untuk menampung { userid: "", links: [] }
const MAX_PACKAGES = 6;
let currentPackageIndex = 0; // Index paket saat ini (0-5)
const packageSize = 3; // Jumlah gambar per paket

// --- Fungsi Utama untuk Memuat Gambar ---
function loadImages() {
    const inputArea = document.getElementById('linkInput');
    
    // Memecah input per baris
    const rawLines = inputArea.value
        .split('\n')
        .map(line => line.trim())
        .filter(line => line.length > 0);
    
    allPackagesData = [];

    rawLines.forEach((line, index) => {
        if (index < MAX_PACKAGES) { // Batasi hingga MAX_PACKAGES
            const parts = line.split(' ').map(part => part.trim()).filter(part => part.length > 0);
            if (parts.length >= (1 + packageSize)) { // Minimal 1 userid + 3 link
                const userid = parts[0];
                const links = parts.slice(1, 1 + packageSize); // Ambil 3 link pertama
                allPackagesData.push({ userid: userid, links: links });
            } else if (parts.length > 1) { // Ada userid tapi link kurang dari 3
                const userid = parts[0];
                const links = parts.slice(1);
                // Tambahkan link kosong jika kurang dari 3
                while (links.length < packageSize) {
                    links.push(""); // Menggunakan string kosong sebagai penanda
                }
                allPackagesData.push({ userid: userid, links: links });
            }
        }
    });
    
    document.getElementById('maxPackageNum').textContent = allPackagesData.length;
    
    if (allPackagesData.length > 0) {
        currentPackageIndex = 0; // Selalu mulai dari paket pertama
        updateGallery(currentPackageIndex);
    } else {
        // Reset jika tidak ada data
        currentPackageIndex = 0;
        document.getElementById('currentPackageNum').textContent = 0;
        document.getElementById('prevBtn').disabled = true;
        document.getElementById('nextBtn').disabled = true;
        // Kosongkan slot gambar
        const slots = [
            document.getElementById('imgSlot1'),
            document.getElementById('imgSlot2'),
            document.getElementById('imgSlot3')
        ];
        slots.forEach(slot => {
            slot.querySelector('img').src = "placeholder.png";
            slot.querySelector('img').setAttribute('data-link', "");
            slot.querySelector('p').textContent = "Kosong";
            slot.setAttribute('data-userid', "");
            slot.setAttribute('data-link', ""); // Kosongkan juga data-link di slot
            slot.style.opacity = 0.5;
        });
    }
}

// --- Fungsi untuk Mengupdate Tampilan Galeri ---
function updateGallery(index) {
    const slots = [
        document.getElementById('imgSlot1'),
        document.getElementById('imgSlot2'),
        document.getElementById('imgSlot3')
    ];

    if (index >= 0 && index < allPackagesData.length) {
        const currentPackage = allPackagesData[index];
        const userid = currentPackage.userid;
        const links = currentPackage.links;

        for (let i = 0; i < packageSize; i++) {
            const imgElement = slots[i].querySelector('img');
            const pElement = slots[i].querySelector('p');
            const link = links[i] || ""; // Gunakan link, jika kosong pakai string kosong

            if (link) {
                imgElement.src = link;
                slots[i].setAttribute('data-link', link); // Simpan link di slot
                pElement.textContent = `Gambar ${i + 1}`;
                slots[i].style.opacity = 1;
            } else {
                imgElement.src = "placeholder.png";
                slots[i].setAttribute('data-link', ""); // Link kosong
                pElement.textContent = `Kosong`;
                slots[i].style.opacity = 0.5;
            }
            // Selalu update userid di slot
            slots[i].setAttribute('data-userid', userid); 
        }
    } else {
        // Jika index tidak valid, tampilkan placeholder
        slots.forEach(slot => {
            slot.querySelector('img').src = "placeholder.png";
            slot.querySelector('img').setAttribute('data-link', "");
            slot.querySelector('p').textContent = "Kosong";
            slot.setAttribute('data-userid', "");
            slot.setAttribute('data-link', "");
            slot.style.opacity = 0.5;
        });
    }

    // Update informasi paket
    document.getElementById('currentPackageNum').textContent = allPackagesData.length > 0 ? index + 1 : 0;

    // Update status tombol navigasi
    document.getElementById('prevBtn').disabled = (index === 0 || allPackagesData.length === 0);
    document.getElementById('nextBtn').disabled = (index >= allPackagesData.length - 1 || allPackagesData.length === 0);
}

// --- Fungsi Navigasi Kanan (Next) ---
function nextPackage() {
    if (currentPackageIndex < allPackagesData.length - 1) {
        currentPackageIndex++;
        updateGallery(currentPackageIndex);
    }
}

// --- Fungsi Navigasi Kiri (Prev) ---
function prevPackage() {
    if (currentPackageIndex > 0) {
        currentPackageIndex--;
        updateGallery(currentPackageIndex);
    }
}

// --- Fungsi Zoom Gambar ---
function openZoom(slotElement) {
    const imageUrl = slotElement.getAttribute('data-link');
    const userid = slotElement.getAttribute('data-userid');
    
    if (imageUrl) {
        const modal = document.getElementById("zoomModal");
        const zoomedImage = document.getElementById("zoomedImage");
        const zoomedUserid = document.getElementById("zoomedUserid");
        
        zoomedImage.src = imageUrl;
        zoomedUserid.textContent = userid || 'N/A'; // Tampilkan userid atau 'N/A' jika kosong
        modal.style.display = "block";
    }
}

// --- Fungsi Tutup Zoom ---
function closeZoom(event) {
    const modal = document.getElementById("zoomModal");
    // Tutup jika mengklik tombol (x) atau area di luar gambar
    if (event.target === modal || event.target.classList.contains('close-btn')) {
        modal.style.display = "none";
    }
}

// Inisialisasi awal (jika Anda ingin paket 0/0 langsung terlihat saat dimuat)
document.addEventListener('DOMContentLoaded', () => {
    updateGallery(currentPackageIndex); 
});
</script>

</body>

</html>

